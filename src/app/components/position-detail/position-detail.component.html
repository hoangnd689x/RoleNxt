<div class="container-fluid details-page" *ngIf="isLoaded">
    <div class="text-center custom-border" style="margin-bottom: 2rem;
        background-color: #e9ecef;
        border-radius: .3rem; margin-bottom: 0">
        <div class="row">
            <div class="col-md-2">
                <!-- <button class="btn btn-success" style="width: 100%;"
                    (click)="changeDetailByDomain(domain.id,positionDetail.positionObj.id)">{{domain.name}}</button> -->
                    <button class="btn btn-success"style="margin-left:10px;">CC</button>
                    <button class="btn btn-success"style="margin-left:10px;">CM</button>
                    <button class="btn btn-success"style="margin-left:10px;">PS</button>
            </div>

            <div class="col-md-6">
                <h3>{{positionDetail.positionObj && positionDetail.positionObj.organizationObj.name}} -
                    {{positionDetail.positionObj&&positionDetail.positionObj.name}}</h3>
            </div>
        </div>
    </div>
    <div class="custom-border">
        <div class="row">
            <div class="col-md-3">
                <div class="content-block">
                    <img class="fakeimg img-responsive fit-image"
                        src="https://www.nicepng.com/png/detail/772-7726577_refrubished-employee-icon-admin-assets-upload-id.png" />
                </div>
                <div class="content-block">
                    <h4>Industrial Role</h4>
                    <div [innerHTML]="positionDetail.industrialRole"></div>
                </div>
                <div class="content-block">
                    <h4>Entry Criteria</h4>

                        <div *ngIf="!isShowMoreEntr && positionDetailEntryCriteria.length > 3; else elseBlockEntr2">
                            <ul>
                                <li *ngFor="let cri of positionDetailEntryCriteria | slice:0:3; let i=index">{{cri}}</li>
                                <div (click)="showMoreEntr()" class="show-more">Show more >></div>
                            </ul>
                        </div>
    
                        <ng-template #elseBlockEntr2>
                            <div *ngIf="isShowMoreEntr && positionDetailEntryCriteria.length > 3; else elseBlockEntr1">
                                <ul>
                                    <li *ngFor="let cri of positionDetailEntryCriteria">{{cri}}</li>
                                    <div (click)="collapseEntr()" class="show-more">Show less << </div>
                                </ul>
                            </div>
                            
                        </ng-template>

                    <ng-template #elseBlockEntr1>
                        <ul>
                            <li *ngFor="let cri of positionDetailEntryCriteria">{{cri}}</li>
                        </ul>
                    </ng-template>

                </div>
            </div>

            <div class="col-md-5">
                <div class="content-block">
                    <h4>Responsibilities</h4>

                    <div *ngIf="positionDetailResponsibilities.length > 3; else elseBlockRes1">
                        <div *ngIf="!isShowMoreRes && positionDetailResponsibilities.length > 3; else elseBlockRes2">
                            <ul>
                                <li *ngFor="let res of positionDetailResponsibilities | slice:0:3; let i=index">{{res}}</li>
                                <div (click)="showMoreRes()" class="show-more">Show more >></div>
                            </ul>
                        </div>
    
                        <ng-template #elseBlockRes2>
                            <ul>
                                <li *ngFor="let res of positionDetailResponsibilities">{{res}}</li>
                                <div (click)="collapseRes()" class="show-more">Show less <<</div>
                            </ul>
                        </ng-template>
                    </div>

                    <ng-template #elseBlockRes1>
                        <ul>
                            <li *ngFor="let res of positionDetailResponsibilities">{{res}}</li>
                        </ul>
                    </ng-template>

                </div>
                <div class="content-block">
                    <h4>KRA (key responsible area)</h4>

                    <div *ngIf="positionDetailKRA.length > 3; else elseBlock1">
                        <div *ngIf="!isShowMoreKRA && positionDetailKRA.length > 3; else elseBlock2">
                            <ul>
                                <li *ngFor="let kra of positionDetailKRA | slice:0:3; let i=index">{{kra}}</li>
                                <div (click)="showMoreKRA()" class="show-more">Show more >></div>
                            </ul>
                        </div>
    
                        <ng-template #elseBlock2>
                            <ul>
                                <li *ngFor="let kra of positionDetailKRA">{{kra}}</li>
                                <div (click)="collapseKRA()" class="show-more">Show less <<</div>
                            </ul>
                        </ng-template>
                    </div>

                    <ng-template #elseBlock1>
                        <ul>
                            <li *ngFor="let kra of positionDetailKRA">{{kra}}</li>
                        </ul>
                    </ng-template>

                </div>
                <!-- <div class="content-block">
                    <h4>Scope</h4>
                    <h5>{{positionDetail.scope}}</h5>
                </div>

                <div class="content-block">
                    <h4>Domain</h4>
                    <h5>{{positionDetail.domain}}</h5>
                </div> -->
            </div>

            <div class="col-md-4">
                <div class="content-block">
                    <h4>Career progression</h4>
                    <career-progression [sourcePositionID]="positionDetail.positionObj &&positionDetail.positionObj.id"
                        [departmentID]="positionDetail.positionObj && positionDetail.positionObj.organizationObj.id">
                    </career-progression>
                </div>
                <div class="content-block">
                    <h4>Competencies required</h4>
                    <div *ngIf="positionDetail.competencies.length > 3; else elseBlockComp1">
                        <div *ngIf="!isShowMoreComp && positionDetail.competencies.length > 3; else elseBlockComp2">
                            <ul>
                                <li *ngFor="let comp of positionDetail.competencies | slice:0:3; let i=index">
                                    {{comp.name}}</li>
                                <div (click)="showMoreComp()" class="show-more">Show more >></div>
                            </ul>
                        </div>

                        <ng-template #elseBlockComp2>
                            <ul>
                                <li *ngFor="let comp of positionDetail.competencies">{{comp.name}}</li>
                                <div (click)="collapseComp()" class="show-more">Show less <<</div>
                            </ul>
                        </ng-template>
                    </div>

                    <ng-template #elseBlockComp1>
                        <ul>
                            <li *ngFor="let comp of positionDetail.competencies">{{comp.name}}</li>
                        </ul>
                    </ng-template>

                </div>
                <!-- <div class="content-block">
                    <h4>Project Category</h4>
                    <h5>{{positionDetail.projectCategory}}</h5>
                </div>
                <div class="content-block">
                    <h4>Domain Roles</h4>
                    <h5>{{positionDetail.domainRoles}}</h5>
                </div>
                <div class="content-block">
                    <h4>Career path</h4>
                    <h5>{{positionDetail.careerPath}}</h5>
                </div> -->
            </div>
        </div>
        <div class="row" style="float: right">
            <button type="button" class="custom-button btn btn-primary" (click)="backToPositions();">Back To Previous
                Page</button>
            <button type="button" class="custom-button btn btn-primary"
                [routerLink]="['/position',positionDetail.positionObj.organizationObj.id]">Back To Lattice
                Page</button>
        </div>
    </div>

</div>